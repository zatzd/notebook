<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pink Notebook - Smile Guaranteed!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap');
        
        body {
            font-family: 'Comic Neue', cursive;
            background-color: #fff0f5;
            transition: all 0.3s ease;
        }
        
        .pink-gradient {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
        }
        
        .note-card {
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.2);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .note-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 105, 180, 0.3);
        }
        
        .btn-pink {
            background-color: #ff69b4;
            color: white;
            transition: all 0.3s;
        }
        
        .btn-pink:hover {
            background-color: #ff1493;
            transform: scale(1.05);
        }
        
        .smiley {
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .heart {
            position: absolute;
            opacity: 0.6;
            animation: float linear infinite;
        }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); opacity: 0.6; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(255, 192, 203, 0.8);
        }
        
        .modal-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            border: 1px solid #ff69b4;
            width: 80%;
            max-width: 500px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4);
            animation: modalAppear 0.4s;
        }
        
        @keyframes modalAppear {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
    .content {
      flex: 1;
    }
    .footer-buttons {
      background-color: #1a1a1a;
      padding: 20px;
      text-align: center;
    }
    .button {
      display: inline-block;
      margin: 0 10px;
      padding: 12px 25px;
      font-size: 16px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      color: white;
      text-decoration: none;
      transition: 0.3s;
    }
    .wa { background-color: #25D366; }
    .tt { background-color: #000000; }
    .ig { background-color: #E4405F; }
    .button:hover { opacity: 0.85; }
    </style>
</head>
<body>
    <!-- Floating hearts background -->
    <div class="floating-hearts" id="heartsContainer"></div>
    
    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content p-8">
            <span class="close text-pink-500 float-right text-2xl cursor-pointer" onclick="closeModal('loginModal')">&times;</span>
            <h2 class="text-3xl font-bold text-pink-600 mb-6 text-center">Welcome Back! <i class="fas fa-smile-beam smiley"></i></h2>
            <form id="loginForm" class="space-y-4">
                <div>
                    <label class="block text-pink-700 mb-2" for="loginUsername">Username</label>
                    <input type="text" id="loginUsername" class="w-full px-4 py-2 border border-pink-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                </div>
                <div>
                    <label class="block text-pink-700 mb-2" for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" class="w-full px-4 py-2 border border-pink-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                </div>
                <button type="submit" class="btn-pink w-full py-3 rounded-lg font-bold text-lg">Login <i class="fas fa-sign-in-alt"></i></button>
            </form>
            <p class="mt-4 text-center text-pink-600">Don't have an account? <a href="#" class="font-bold underline" onclick="showRegisterModal()">Register here</a></p>
        </div>
    </div>
    
    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content p-8">
            <span class="close text-pink-500 float-right text-2xl cursor-pointer" onclick="closeModal('registerModal')">&times;</span>
            <h2 class="text-3xl font-bold text-pink-600 mb-6 text-center">Join Our Pink Family! <i class="fas fa-heart smiley"></i></h2>
            <form id="registerForm" class="space-y-4">
                <div>
                    <label class="block text-pink-700 mb-2" for="registerUsername">Username</label>
                    <input type="text" id="registerUsername" class="w-full px-4 py-2 border border-pink-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                </div>
                <div>
                    <label class="block text-pink-700 mb-2" for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" class="w-full px-4 py-2 border border-pink-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                </div>
                <div>
                    <label class="block text-pink-700 mb-2" for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" class="w-full px-4 py-2 border border-pink-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                </div>
                <button type="submit" class="btn-pink w-full py-3 rounded-lg font-bold text-lg">Register <i class="fas fa-user-plus"></i></button>
            </form>
            <p class="mt-4 text-center text-pink-600">Already have an account? <a href="#" class="font-bold underline" onclick="showLoginModal()">Login here</a></p>
        </div>
    </div>
    
    <!-- Main App Container -->
    <div id="appContainer" class="container mx-auto px-4 py-8 hidden">
        <!-- Header -->
        <header class="flex justify-between items-center mb-10">
            <div class="flex items-center">
                <i class="fas fa-book text-pink-600 text-4xl mr-3"></i>
                <h1 class="text-4xl font-bold text-pink-600">Pink Notebook <i class="fas fa-smile-wink smiley"></i></h1>
            </div>
            <div class="flex items-center space-x-4">
                <span id="welcomeMessage" class="text-pink-700 font-semibold"></span>
                <button id="logoutBtn" class="btn-pink px-4 py-2 rounded-lg flex items-center">
                    Logout <i class="fas fa-sign-out-alt ml-2"></i>
                </button>
            </div>
        </header>
        
        <!-- Add Note Section -->
        <div class="mb-10 p-6 pink-gradient rounded-xl shadow-lg">
            <h2 class="text-2xl font-bold text-white mb-4">Add New Note <i class="fas fa-plus-circle"></i></h2>
            <form id="addNoteForm" class="flex flex-col md:flex-row gap-4">
                <input type="text" id="noteTitle" placeholder="Note title..." class="flex-grow px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500" required>
                <button type="submit" class="btn-pink px-6 py-3 rounded-lg font-bold flex items-center justify-center">
                    Add Note <i class="fas fa-feather-alt ml-2"></i>
                </button>
            </form>
        </div>
        
        <!-- Notes Grid -->
        <div id="notesContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Notes will be dynamically added here -->
        </div>
        
        <!-- Empty State -->
        <div id="emptyState" class="text-center py-20">
            <i class="fas fa-book-open text-pink-300 text-6xl mb-4"></i>
            <h3 class="text-2xl font-bold text-pink-500 mb-2">No notes yet!</h3>
            <p class="text-pink-400">Start by adding your first note above <i class="fas fa-arrow-up"></i></p>
        <h3>support zatzd</h3>
        <a href="https://whatsapp.com/channel/0029VatH5BLA89MnxIpgax2C" class="button wa" target="_blank">WhatsApp</a>
        <a href="https://www.tiktok.com/@zatzd" class="button tt" target="_blank">TikTok</a>
        <a href="https://www.instagram.com/zat_zd" class="button ig" target="_blank">Instagram</a>
    </div>
    </div>
    
    <!-- Welcome Screen -->
    <div id="welcomeScreen" class="min-h-screen flex flex-col justify-center items-center p-4">
        <div class="text-center max-w-2xl">
            <h1 class="text-5xl md:text-6xl font-bold text-pink-600 mb-6">Pink Notebook <i class="fas fa-smile-beam smiley"></i></h1>
            <p class="text-xl text-pink-700 mb-10">The happiest place for your thoughts! Guaranteed to make you smile with every note you take.</p>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <button onclick="showLoginModal()" class="btn-pink px-8 py-4 rounded-full text-xl font-bold flex items-center justify-center">
                    Login <i class="fas fa-sign-in-alt ml-2"></i>
                </button>
                <button onclick="showRegisterModal()" class="bg-white text-pink-600 border-2 border-pink-500 px-8 py-4 rounded-full text-xl font-bold flex items-center justify-center hover:bg-pink-50 transition">
                    Register <i class="fas fa-user-plus ml-2"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Create floating hearts
        function createHearts() {
            const container = document.getElementById('heartsContainer');
            const colors = ['#ff69b4', '#ffb6c1', '#ffc0cb', '#ff1493', '#db7093'];
            
            for (let i = 0; i < 20; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = '<i class="fas fa-heart"></i>';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.top = Math.random() * 100 + 'vh';
                heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
                heart.style.color = colors[Math.floor(Math.random() * colors.length)];
                heart.style.animationDuration = (Math.random() * 15 + 10) + 's';
                heart.style.animationDelay = (Math.random() * 5) + 's';
                container.appendChild(heart);
            }
        }
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            createHearts();
            
            // Check if user is already logged in
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                showApp();
            } else {
                document.getElementById('welcomeScreen').classList.remove('hidden');
            }
            
            // Setup event listeners
            setupEventListeners();
        });
        
        // Modal functions
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'block';
        }
        
        function showRegisterModal() {
            document.getElementById('registerModal').style.display = 'block';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // Show the app after login
        function showApp() {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('appContainer').classList.remove('hidden');
            
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            document.getElementById('welcomeMessage').textContent = `Welcome, ${currentUser.username}!`;
            
            loadNotes();
        }
        
        // Setup all event listeners
        function setupEventListeners() {
            // Login form
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                loginUser();
            });
            
            // Register form
            document.getElementById('registerForm').addEventListener('submit', function(e) {
                e.preventDefault();
                registerUser();
            });
            
            // Logout button
            document.getElementById('logoutBtn').addEventListener('click', function() {
                localStorage.removeItem('currentUser');
                location.reload();
            });
            
            // Add note form
            document.getElementById('addNoteForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addNote();
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target.className === 'modal') {
                    event.target.style.display = 'none';
                }
            });
        }
        
        // Secure hash function for passwords
        function hashPassword(password) {
            return CryptoJS.SHA256(password).toString();
        }
        
        // Sanitize input to prevent XSS
        function sanitizeInput(input) {
            const div = document.createElement('div');
            div.textContent = input;
            return div.innerHTML;
        }
        
        // Login user
        function loginUser() {
            const username = sanitizeInput(document.getElementById('loginUsername').value);
            const password = hashPassword(document.getElementById('loginPassword').value);
            
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                localStorage.setItem('currentUser', JSON.stringify(user));
                closeModal('loginModal');
                showApp();
            } else {
                alert('Invalid username or password!');
            }
        }
        
        // Register user
        function registerUser() {
            const username = sanitizeInput(document.getElementById('registerUsername').value);
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (password !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }
            
            if (password.length < 6) {
                alert('Password must be at least 6 characters long!');
                return;
            }
            
            const hashedPassword = hashPassword(password);
            
            const users = JSON.parse(localStorage.getItem('users')) || [];
            
            if (users.some(u => u.username === username)) {
                alert('Username already exists!');
                return;
            }
            
            const newUser = {
                username,
                password: hashedPassword,
                notes: []
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(newUser));
            
            closeModal('registerModal');
            showApp();
        }
        
        // Add a new note
        function addNote() {
            const title = sanitizeInput(document.getElementById('noteTitle').value);
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (!title.trim()) {
                alert('Note title cannot be empty!');
                return;
            }
            
            const newNote = {
                id: Date.now(),
                title,
                content: '',
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            currentUser.notes.push(newNote);
            
            // Update user in localStorage
            const users = JSON.parse(localStorage.getItem('users'));
            const userIndex = users.findIndex(u => u.username === currentUser.username);
            users[userIndex] = currentUser;
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // Clear input
            document.getElementById('noteTitle').value = '';
            
            // Reload notes
            loadNotes();
        }
        
        // Load all notes for the current user
        function loadNotes() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const notesContainer = document.getElementById('notesContainer');
            const emptyState = document.getElementById('emptyState');
            
            notesContainer.innerHTML = '';
            
            if (currentUser.notes.length === 0) {
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            
            // Sort notes by updatedAt (newest first)
            const sortedNotes = [...currentUser.notes].sort((a, b) => 
                new Date(b.updatedAt) - new Date(a.updatedAt)
            );
            
            sortedNotes.forEach(note => {
                const noteElement = document.createElement('div');
                noteElement.className = 'note-card p-6 hover:bg-pink-50';
                noteElement.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h3 class="text-xl font-bold text-pink-700 truncate">${note.title}</h3>
                        <div class="flex space-x-2">
                            <button onclick="editNote(${note.id})" class="text-pink-500 hover:text-pink-700">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteNote(${note.id})" class="text-pink-500 hover:text-pink-700">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                            
                        </div>
                        
                    </div>
                    
                    <p class="text-pink-600 mb-4">${note.content || 'No content yet...'}</p>
                    <div class="text-xs text-pink-400">
                        <span>Created: ${new Date(note.createdAt).toLocaleString()}</span>
                        <br>
                        <span>Updated: ${new Date(note.updatedAt).toLocaleString()}</span>
                        <h3>by zatzd<h3>
                    </div>
                    
                `;
                notesContainer.appendChild(noteElement);
            });
        }
        
        // Edit note (placeholder - would open a modal in a real app)
        function editNote(noteId) {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const note = currentUser.notes.find(n => n.id === noteId);
            
            if (note) {
                const newContent = prompt('Edit your note:', note.content);
                if (newContent !== null) {
                    note.content = sanitizeInput(newContent);
                    note.updatedAt = new Date().toISOString();
                    
                    // Update user in localStorage
                    const users = JSON.parse(localStorage.getItem('users'));
                    const userIndex = users.findIndex(u => u.username === currentUser.username);
                    users[userIndex] = currentUser;
                    localStorage.setItem('users', JSON.stringify(users));
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    
                    // Reload notes
                    loadNotes();
                }
            }
        }
        
        // Delete note
        function deleteNote(noteId) {
            if (confirm('Are you sure you want to delete this note?')) {
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                currentUser.notes = currentUser.notes.filter(n => n.id !== noteId);
                
                // Update user in localStorage
                const users = JSON.parse(localStorage.getItem('users'));
                const userIndex = users.findIndex(u => u.username === currentUser.username);
                users[userIndex] = currentUser;
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                // Reload notes
                loadNotes();
            }
        }
    </script>
</body>
</html>
